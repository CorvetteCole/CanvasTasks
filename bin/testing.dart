import 'dart:convert';
import 'dart:io';


import 'package:CanvasTasks/models/assignment/Assignment.dart';
//import 'file:///home/coleg/IdeaProjects/CanvasTasks/temp/utilities.dart';
//var testResponse ="[{\"id\":10432782,\"description\":\"\",\"due_at\":\"2020-01-25T04:59:59Z\",\"unlock_at\":null,\"lock_at\":null,\"points_possible\":20.0,\"grading_type\":\"points\",\"assignment_group_id\":2900903,\"grading_standard_id\":null,\"created_at\":\"2020-01-08T19:26:38Z\",\"updated_at\":\"2020-01-27T16:14:03Z\",\"peer_reviews\":false,\"automatic_peer_reviews\":false,\"position\":1,\"grade_group_students_individually\":false,\"anonymous_peer_reviews\":false,\"group_category_id\":null,\"post_to_sis\":false,\"moderated_grading\":false,\"omit_from_final_grade\":false,\"intra_group_peer_reviews\":false,\"anonymous_instructor_annotations\":false,\"anonymous_grading\":false,\"graders_anonymous_to_graders\":false,\"grader_count\":0,\"grader_comments_visible_to_graders\":true,\"final_grader_id\":null,\"grader_names_visible_to_final_grader\":true,\"allowed_attempts\":-1,\"secure_params\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsdGlfYXNzaWdubWVudF9pZCI6Ijc4OTcwMjg1LTE0NjYtNGViMi04OWMxLTNkNDBhMjE4ZGY3YiJ9.RQrx5v8ElcIwEoPFWPi691hW9qfddjjcsKiya2RXUkE\",\"course_id\":1966110,\"name\":\"Quiz 1 \",\"submission_types\":[\"none\"],\"has_submitted_submissions\":false,\"due_date_required\":false,\"max_name_length\":255,\"in_closed_grading_period\":false,\"is_quiz_assignment\":false,\"can_duplicate\":true,\"original_course_id\":null,\"original_assignment_id\":null,\"original_assignment_name\":null,\"original_quiz_id\":null,\"workflow_state\":\"published\",\"muted\":false,\"html_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432782\",\"published\":true,\"only_visible_to_overrides\":false,\"locked_for_user\":false,\"submissions_download_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432782/submissions?zip=1\",\"post_manually\":true,\"anonymize_students\":false,\"require_lockdown_browser\":false},{\"id\":10432786,\"description\":\"\",\"due_at\":\"2020-02-01T04:59:59Z\",\"unlock_at\":null,\"lock_at\":null,\"points_possible\":20.0,\"grading_type\":\"points\",\"assignment_group_id\":2900903,\"grading_standard_id\":null,\"created_at\":\"2020-01-08T19:26:39Z\",\"updated_at\":\"2020-02-03T23:18:13Z\",\"peer_reviews\":false,\"automatic_peer_reviews\":false,\"position\":2,\"grade_group_students_individually\":false,\"anonymous_peer_reviews\":false,\"group_category_id\":null,\"post_to_sis\":false,\"moderated_grading\":false,\"omit_from_final_grade\":false,\"intra_group_peer_reviews\":false,\"anonymous_instructor_annotations\":false,\"anonymous_grading\":false,\"graders_anonymous_to_graders\":false,\"grader_count\":0,\"grader_comments_visible_to_graders\":true,\"final_grader_id\":null,\"grader_names_visible_to_final_grader\":true,\"allowed_attempts\":-1,\"secure_params\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsdGlfYXNzaWdubWVudF9pZCI6IjMxYjVmZDViLWQ3OTItNDU4Ny1hNGY0LWUzODZhOWNlOGM2ZiJ9.7UvThVGHFOBdF_-vIA0FXhJOgSf1YqppuEOP4xCUOOU\",\"course_id\":1966110,\"name\":\"Quiz 2\",\"submission_types\":[\"none\"],\"has_submitted_submissions\":false,\"due_date_required\":false,\"max_name_length\":255,\"in_closed_grading_period\":false,\"is_quiz_assignment\":false,\"can_duplicate\":true,\"original_course_id\":null,\"original_assignment_id\":null,\"original_assignment_name\":null,\"original_quiz_id\":null,\"workflow_state\":\"published\",\"muted\":false,\"html_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432786\",\"published\":true,\"only_visible_to_overrides\":false,\"locked_for_user\":false,\"submissions_download_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432786/submissions?zip=1\",\"post_manually\":true,\"anonymize_students\":false,\"require_lockdown_browser\":false},{\"id\":10432787,\"description\":\"\u003clink rel=\"stylesheet\" href=\"https://instructure-uploads.s3.amazonaws.com/account_11390000000088786/attachments/90570574/canvas_global_app.css\"\u003e\u003cp\u003eIn class on Friday.\u003c/p\u003e\u003cscript src=\"https://instructure-uploads.s3.amazonaws.com/account_11390000000088786/attachments/90570573/canvas_global_app.js\"\u003e\u003c/script\u003e\",\"due_at\":\"2020-02-08T04:59:00Z\",\"unlock_at\":null,\"lock_at\":null,\"points_possible\":20.0,\"grading_type\":\"points\",\"assignment_group_id\":2900903,\"grading_standard_id\":null,\"created_at\":\"2020-01-08T19:26:39Z\",\"updated_at\":\"2020-02-14T14:39:59Z\",\"peer_reviews\":false,\"automatic_peer_reviews\":false,\"position\":3,\"grade_group_students_individually\":false,\"anonymous_peer_reviews\":false,\"group_category_id\":null,\"post_to_sis\":false,\"moderated_grading\":false,\"omit_from_final_grade\":false,\"intra_group_peer_reviews\":false,\"anonymous_instructor_annotations\":false,\"anonymous_grading\":false,\"graders_anonymous_to_graders\":false,\"grader_count\":0,\"grader_comments_visible_to_graders\":true,\"final_grader_id\":null,\"grader_names_visible_to_final_grader\":true,\"allowed_attempts\":-1,\"secure_params\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsdGlfYXNzaWdubWVudF9pZCI6ImU3ODc3MjRjLWQ3MTctNDliNy04MjFhLWJkMGU3YjJkM2UzZiJ9.eFz_40P9MOxDBQFyze2RK6TYxPr0UGUr9LfcxhaRmV0\",\"course_id\":1966110,\"name\":\"Quiz 3\",\"submission_types\":[\"none\"],\"has_submitted_submissions\":false,\"due_date_required\":false,\"max_name_length\":255,\"in_closed_grading_period\":false,\"is_quiz_assignment\":false,\"can_duplicate\":true,\"original_course_id\":null,\"original_assignment_id\":null,\"original_assignment_name\":null,\"original_quiz_id\":null,\"workflow_state\":\"published\",\"muted\":false,\"html_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432787\",\"allowed_extensions\":[\"pdf\"],\"published\":true,\"only_visible_to_overrides\":false,\"locked_for_user\":false,\"submissions_download_url\":\"https://uk.instructure.com/courses/1966110/assignments/10432787/submissions?zip=1\",\"post_manually\":true,\"anonymize_students\":false,\"require_lockdown_browser\":false},]";
//var testObject = "{id: 10432782, description: , due_at: 2020-01-25T04:59:59Z, unlock_at: null, lock_at: null, points_possible: 20, grading_type: points, assignment_group_id: 2900903, grading_standard_id: null, created_at: 2020-01-08T19:26:38Z, updated_at: 2020-01-27T16:14:03Z, peer_reviews: false, automatic_peer_reviews: false, position: 1, grade_group_students_individually: false, anonymous_peer_reviews: false, group_category_id: null, post_to_sis: false, moderated_grading: false, omit_from_final_grade: false, intra_group_peer_reviews: false, anonymous_instructor_annotations: false, anonymous_grading: false, graders_anonymous_to_graders: false, grader_count: 0, grader_comments_visible_to_graders: true, final_grader_id: null, grader_names_visible_to_final_grader: true, allowed_attempts: -1, secure_params: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsdGlfYXNzaWdubWVudF9pZCI6Ijc4OTcwMjg1LTE0NjYtNGViMi04OWMxLTNkNDBhMjE4ZGY3YiJ9.RQrx5v8ElcIwEoPFWPi691hW9qfddjjcsKiya2RXUkE, course_id: 1966110, name: Quiz 1 , submission_types: [none], has_submitted_submissions: false, due_date_required: false, max_name_length: 255, in_closed_grading_period: false, is_quiz_assignment: false, can_duplicate: true, original_course_id: null, original_assignment_id: null, original_assignment_name: null, original_quiz_id: null, workflow_state: published, muted: false, html_url: https://uk.instructure.com/courses/1966110/assignments/10432782, published: true, only_visible_to_overrides: false, locked_for_user: false, submissions_download_url: https://uk.instructure.com/courses/1966110/assignments/10432782/submissions?zip=1, post_manually: true, anonymize_students: false, require_lockdown_browser: false}\";

void main() async {
  var testResponse = File('response.txt');
  if (await testResponse.exists()) {

    var assignments = <Assignment>[];
    var responseJsonList = jsonDecode(await testResponse.readAsString()) as List<dynamic>;

    for (var response in responseJsonList){
      print(response);
      //print(response.runtimeType);
      print(DateTime.parse(Assignment.fromJson(response).dueAt).isUtc);
    }
    //var testList = await testResponse.readAsString() as List<dynamic>;


    //(await testResponse.readAsString() as List<dynamic>).forEach((tempAssignment) => assignments.add(Assignment.fromJson(tempAssignment)));


  }
//  if (await cookies.exists()) {
//  var tempCookieList = <CookieParam>[];
//  (jsonDecode(await cookies.readAsString()) as List<dynamic>).forEach(
//  (tempCookie) =>
//  tempCookieList.add(CookieParam.fromJson(tempCookie)));
//  await page.setCookies(tempCookieList);
//  cookiesLoaded = true;
//  }

  //var testList = jsToMap(testResponse);


  //print((json.decode(testResponse) as List).map((i) => Assignment.fromJson(i)).toList());

}